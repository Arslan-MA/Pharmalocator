{% extends 'client_app/base.html' %}

{% block title %}–î–µ—Ç–∞–ª–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞{% endblock title %}

{% block content %}
    <div class="detail_page">
        <h1>–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–≤–µ–¥–µ–Ω–∏–π –æ –ª–µ–∫–∞—Ä—Å—Ç–≤–µ</h1>
        <img src="{{ medicine.photo.url }}" alt="{{ medicine.title }}">
        <p><b>–ù–∞–∑–≤–∞–Ω–∏–µ:</b><br> {{ medicine.title }}</p>
        <p><b>–ö–∞—Ç–µ–≥–æ—Ä–∏—è –ª–µ–∫–∞—Ä—Å—Ç–≤–∞:</b><br> {{ medicine.medicinal_category }}</p>
        <p><b>–¢–∏–ø –ª–µ–∫–∞—Ä—Å—Ç–≤–∞:</b><br> {{ medicine.type_medicine }}</p>
        <p><b>–í–æ–∑—Ä–∞—Å—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è:</b><br> {{ medicine.age_category }}</p>
        <p><b>–û–ø–∏—Å–∞–Ω–∏–µ:</b><br> {{ medicine.description }}</p>
        <p><b>–¶–µ–Ω–∞:</b><br> {{ medicine.price }}$</p>
        <div style="margin: 20px;">
            {% if user.is_authenticated %}
                {% if favorites %}
                    {% for favorite in favorites %}
                        <a href="{% url 'client_app:delete_favorites' favorite.pk %}"
                           class="detail_btn detail_btn_ll">–£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö</a><br><br>
                    {% endfor %}
                {% else %}
                    <a href="{% url 'client_app:add_favorites' medicine.slug %}"
                       class="detail_btn detail_btn_p">–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ</a><br><br>
                {% endif %}
                <a href="{% url 'client_app:cart_add_page' medicine.slug %}" class="detail_btn detail_btn_p">–í –∫–æ—Ä–∑–∏–Ω—É</a>
            {% else %}
                <p>–ß—Ç–æ–±—ã –∫—É–ø–∏—Ç—å —Ç–æ–≤–∞—Ä, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</p><br>
            {% endif %}
            <a href="{% url 'client_app:medicine_list' %}" class="detail_btn detail_btn_f">–ù–∞–∑–∞–¥</a>
        </div>
    </div>
    <div class="comments">
        <div>
            {% if user.is_authenticated %}
                <form action="{% url 'client_app:add_medicine_comment' medicine.slug %}"
                      enctype="multipart/form-data" method="POST">
                    {% csrf_token %}
                    {% for form in comment_form %}
                        {{ form.label }}<br>
                        {{ form }}<br><br>
                    {% endfor %}
                    <input type="submit" value="–î–æ–±–∞–≤–∏—Ç—å" class="detail_btn detail_btn_p">
                </form>
            {% else %}
                <p>–í—ã –¥–æ–ª–∂–Ω—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</p>
            {% endif %}
        </div><br>
        <h2>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h2>
        {% if comments %}
            {% for comment in comments %}
                <div class="comments_block">
                    {% if comment.user == user %}
                        <p>–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</p>
                    {% else %}
                        <p>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {{ comment.user.name }}</p>
                    {% endif %}
                    <p>–°–æ–æ–±—â–µ–Ω–∏–µ:<br> {{ comment.body }}</p>
                    <p>Like: {{ comment.likes.count }}</p>
                    <p>Dislike: {{ comment.dislike.count }}</p>
                    <p>–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: {{ comment.published }}</p>
                    {% if user.is_authenticated %}
                        {% if comment.user != user %}
                            <form style="display: inline;" action="{% url 'client_app:like_comment' comment.pk %}">
                                <input type="submit" value="üëç" class="detail_btn detail_btn_p">
                            </form>
                            <form style="display: inline;" action="{% url 'client_app:dislike_comment' comment.pk %}">
                                <input type="submit" value="üëé" class="detail_btn">
                            </form><br><br>
                        {% endif %}
                    {% else %}
                        <p>–ß—Ç–æ–±—ã –ø–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫ –∏–ª–∏ –¥–∏–∑–ª–∞–π–∫, –≤—ã –¥–æ–ª–∂–Ω—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</p>
                    {% endif %}
                    {% if user.is_staff == True %}
                        <a href="{% url 'client_app:delete_comment' comment.pk %}"
                           class="detail_btn detail_btn_ll">–£–¥–∞–ª–∏—Ç—å</a><br><br>
                    {% elif comment.user == user %}
                        <a href="{% url 'client_app:delete_comment' comment.pk %}"
                           class="detail_btn detail_btn_ll">–£–¥–∞–ª–∏—Ç—å</a><br><br>
                    {% endif %}
                </div><br>
            {% endfor %}
        {% else %}
            <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
        {% endif %}
    </div>
{% endblock %}
